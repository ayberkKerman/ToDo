{"ast":null,"code":"\"use strict\";\n/*\n * Copyright (c) 2011 Vinay Pulim <vinay@milewise.com>\n * MIT Licensed\n */\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nexports.__esModule = true;\nexports.HttpClient = void 0;\n\nvar req = require(\"axios\");\n\nvar axios_ntlm_1 = require(\"axios-ntlm\");\n\nvar contentTypeParser = require(\"content-type-parser\");\n\nvar debugBuilder = require(\"debug\");\n\nvar url = require(\"url\");\n\nvar uuid_1 = require(\"uuid\");\n\nvar utils_1 = require(\"./utils\");\n\nvar debug = debugBuilder('node-soap');\n\nvar VERSION = require('../package.json').version;\n/**\n * A class representing the http client\n * @param {Object} [options] Options object. It allows the customization of\n * `request` module\n *\n * @constructor\n */\n\n\nvar HttpClient =\n/** @class */\nfunction () {\n  function HttpClient(options) {\n    options = options || {};\n    this.options = options;\n    this._request = options.request || req[\"default\"].create();\n  }\n  /**\n   * Build the HTTP request (method, uri, headers, ...)\n   * @param {String} rurl The resource url\n   * @param {Object|String} data The payload\n   * @param {Object} exheaders Extra http headers\n   * @param {Object} exoptions Extra options\n   * @returns {Object} The http request object for the `request` module\n   */\n\n\n  HttpClient.prototype.buildRequest = function (rurl, data, exheaders, exoptions) {\n    if (exoptions === void 0) {\n      exoptions = {};\n    }\n\n    var curl = url.parse(rurl);\n    var method = data ? 'POST' : 'GET';\n    var secure = curl.protocol === 'https:';\n    var path = [curl.pathname || '/', curl.search || '', curl.hash || ''].join('');\n    var host = curl.hostname;\n    var port = parseInt(curl.port, 10);\n    var headers = {\n      'User-Agent': 'node-soap/' + VERSION,\n      'Accept': 'text/html,application/xhtml+xml,application/xml,text/xml;q=0.9,*/*;q=0.8',\n      'Accept-Encoding': 'none',\n      'Accept-Charset': 'utf-8',\n      'Connection': exoptions.forever ? 'keep-alive' : 'close',\n      'Host': host + (isNaN(port) ? '' : ':' + port)\n    };\n    var mergeOptions = ['headers'];\n\n    var _attachments = exoptions.attachments,\n        newExoptions = __rest(exoptions, [\"attachments\"]);\n\n    var attachments = _attachments || [];\n\n    if (typeof data === 'string' && attachments.length === 0 && !exoptions.forceMTOM) {\n      headers['Content-Length'] = Buffer.byteLength(data, 'utf8');\n      headers['Content-Type'] = 'application/x-www-form-urlencoded';\n    }\n\n    exheaders = exheaders || {};\n\n    for (var attr in exheaders) {\n      headers[attr] = exheaders[attr];\n    }\n\n    var options = {\n      url: curl.href,\n      method: method,\n      headers: headers,\n      transformResponse: function (data) {\n        return data;\n      }\n    };\n\n    if (!exoptions.ntlm) {\n      options.validateStatus = null;\n    }\n\n    if (exoptions.forceMTOM || attachments.length > 0) {\n      var start = uuid_1.v4();\n      var action = null;\n\n      if (headers['Content-Type'].indexOf('action') > -1) {\n        for (var _i = 0, _a = headers['Content-Type'].split('; '); _i < _a.length; _i++) {\n          var ct = _a[_i];\n\n          if (ct.indexOf('action') > -1) {\n            action = ct;\n          }\n        }\n      }\n\n      headers['Content-Type'] = 'multipart/related; type=\"application/xop+xml\"; start=\"<' + start + '>\"; start-info=\"text/xml\"; boundary=' + uuid_1.v4();\n\n      if (action) {\n        headers['Content-Type'] = headers['Content-Type'] + '; ' + action;\n      }\n\n      var multipart_1 = [{\n        'Content-Type': 'application/xop+xml; charset=UTF-8; type=\"text/xml\"',\n        'Content-ID': '<' + start + '>',\n        'body': data\n      }];\n      attachments.forEach(function (attachment) {\n        multipart_1.push({\n          'Content-Type': attachment.mimetype,\n          'Content-Transfer-Encoding': 'binary',\n          'Content-ID': '<' + attachment.contentId + '>',\n          'Content-Disposition': 'attachment; filename=\"' + attachment.name + '\"',\n          'body': attachment.body\n        });\n      }); // options.multipart = multipart;\n    } else {\n      options.data = data;\n    }\n\n    for (var attr in newExoptions) {\n      if (mergeOptions.indexOf(attr) !== -1) {\n        for (var header in exoptions[attr]) {\n          options[attr][header] = exoptions[attr][header];\n        }\n      } else {\n        options[attr] = exoptions[attr];\n      }\n    }\n\n    debug('Http request: %j', options);\n    return options;\n  };\n  /**\n   * Handle the http response\n   * @param {Object} The req object\n   * @param {Object} res The res object\n   * @param {Object} body The http body\n   * @param {Object} The parsed body\n   */\n\n\n  HttpClient.prototype.handleResponse = function (req, res, body) {\n    debug('Http response body: %j', body);\n\n    if (typeof body === 'string') {\n      // Remove any extra characters that appear before or after the SOAP envelope.\n      var regex = /(?:<\\?[^?]*\\?>[\\s]*)?<([^:]*):Envelope([\\S\\s]*)<\\/\\1:Envelope>/i;\n      var match = body.replace(/<!--[\\s\\S]*?-->/, '').match(regex);\n\n      if (match) {\n        body = match[0];\n      }\n    }\n\n    return body;\n  };\n\n  HttpClient.prototype.request = function (rurl, data, callback, exheaders, exoptions, caller) {\n    var _this_1 = this;\n\n    var options = this.buildRequest(rurl, data, exheaders, exoptions);\n    var req;\n\n    if (exoptions !== undefined && exoptions.ntlm) {\n      var ntlmReq = axios_ntlm_1.NtlmClient({\n        username: exoptions.username,\n        password: exoptions.password,\n        workstation: exoptions.workstation || '',\n        domain: exoptions.domain || ''\n      });\n      req = ntlmReq(options);\n    } else {\n      if (this.options.parseReponseAttachments) {\n        options.responseType = 'arraybuffer';\n        options.responseEncoding = 'binary';\n      }\n\n      req = this._request(options);\n    }\n\n    var _this = this;\n\n    req.then(function (res) {\n      var body;\n\n      if (_this.options.parseReponseAttachments) {\n        var isMultipartResp = res.headers['content-type'] && res.headers['content-type'].toLowerCase().indexOf('multipart/related') > -1;\n\n        if (isMultipartResp) {\n          var boundary = void 0;\n          var parsedContentType = contentTypeParser(res.headers['content-type']);\n\n          if (parsedContentType && parsedContentType.parameterList) {\n            boundary = (parsedContentType.parameterList.find(function (item) {\n              return item.key === 'boundary';\n            }) || {}).value;\n          }\n\n          if (!boundary) {\n            return callback(new Error('Missing boundary from content-type'));\n          }\n\n          var multipartResponse = utils_1.parseMTOMResp(res.data, boundary); // first part is the soap response\n\n          var firstPart = multipartResponse.parts.shift();\n\n          if (!firstPart || !firstPart.body) {\n            return callback(new Error('Cannot parse multipart response'));\n          }\n\n          body = firstPart.body.toString('utf8');\n          res.mtomResponseAttachments = multipartResponse;\n        } else {\n          body = res.data.toString('utf8');\n        }\n      }\n\n      res.data = _this_1.handleResponse(req, res, body || res.data);\n      callback(null, res, res.data);\n      return res;\n    }, function (err) {\n      return callback(err);\n    });\n    return req;\n  };\n\n  HttpClient.prototype.requestStream = function (rurl, data, exheaders, exoptions, caller) {\n    var _this_1 = this;\n\n    var options = this.buildRequest(rurl, data, exheaders, exoptions);\n    options.responseType = 'stream';\n\n    var req = this._request(options).then(function (res) {\n      res.data = _this_1.handleResponse(req, res, res.data);\n      return res;\n    });\n\n    return req;\n  };\n\n  return HttpClient;\n}();\n\nexports.HttpClient = HttpClient;","map":{"version":3,"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","exports","__esModule","HttpClient","req","require","axios_ntlm_1","contentTypeParser","debugBuilder","url","uuid_1","utils_1","debug","VERSION","version","options","_request","request","create","buildRequest","rurl","data","exheaders","exoptions","curl","parse","method","secure","protocol","path","pathname","search","hash","join","host","hostname","port","parseInt","headers","forever","isNaN","mergeOptions","_attachments","attachments","newExoptions","forceMTOM","Buffer","byteLength","attr","href","transformResponse","ntlm","validateStatus","start","v4","action","_i","_a","split","ct","multipart_1","forEach","attachment","push","mimetype","contentId","name","body","header","handleResponse","res","regex","match","replace","callback","caller","_this_1","undefined","ntlmReq","NtlmClient","username","password","workstation","domain","parseReponseAttachments","responseType","responseEncoding","_this","then","isMultipartResp","toLowerCase","boundary","parsedContentType","parameterList","find","item","key","value","Error","multipartResponse","parseMTOMResp","firstPart","parts","shift","toString","mtomResponseAttachments","err","requestStream"],"sources":["C:/Users/ayber/node_modules/soap/lib/http.js"],"sourcesContent":["\"use strict\";\n/*\n * Copyright (c) 2011 Vinay Pulim <vinay@milewise.com>\n * MIT Licensed\n */\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nexports.__esModule = true;\nexports.HttpClient = void 0;\nvar req = require(\"axios\");\nvar axios_ntlm_1 = require(\"axios-ntlm\");\nvar contentTypeParser = require(\"content-type-parser\");\nvar debugBuilder = require(\"debug\");\nvar url = require(\"url\");\nvar uuid_1 = require(\"uuid\");\nvar utils_1 = require(\"./utils\");\nvar debug = debugBuilder('node-soap');\nvar VERSION = require('../package.json').version;\n/**\n * A class representing the http client\n * @param {Object} [options] Options object. It allows the customization of\n * `request` module\n *\n * @constructor\n */\nvar HttpClient = /** @class */ (function () {\n    function HttpClient(options) {\n        options = options || {};\n        this.options = options;\n        this._request = options.request || req[\"default\"].create();\n    }\n    /**\n     * Build the HTTP request (method, uri, headers, ...)\n     * @param {String} rurl The resource url\n     * @param {Object|String} data The payload\n     * @param {Object} exheaders Extra http headers\n     * @param {Object} exoptions Extra options\n     * @returns {Object} The http request object for the `request` module\n     */\n    HttpClient.prototype.buildRequest = function (rurl, data, exheaders, exoptions) {\n        if (exoptions === void 0) { exoptions = {}; }\n        var curl = url.parse(rurl);\n        var method = data ? 'POST' : 'GET';\n        var secure = curl.protocol === 'https:';\n        var path = [curl.pathname || '/', curl.search || '', curl.hash || ''].join('');\n        var host = curl.hostname;\n        var port = parseInt(curl.port, 10);\n        var headers = {\n            'User-Agent': 'node-soap/' + VERSION,\n            'Accept': 'text/html,application/xhtml+xml,application/xml,text/xml;q=0.9,*/*;q=0.8',\n            'Accept-Encoding': 'none',\n            'Accept-Charset': 'utf-8',\n            'Connection': exoptions.forever ? 'keep-alive' : 'close',\n            'Host': host + (isNaN(port) ? '' : ':' + port)\n        };\n        var mergeOptions = ['headers'];\n        var _attachments = exoptions.attachments, newExoptions = __rest(exoptions, [\"attachments\"]);\n        var attachments = _attachments || [];\n        if (typeof data === 'string' && attachments.length === 0 && !exoptions.forceMTOM) {\n            headers['Content-Length'] = Buffer.byteLength(data, 'utf8');\n            headers['Content-Type'] = 'application/x-www-form-urlencoded';\n        }\n        exheaders = exheaders || {};\n        for (var attr in exheaders) {\n            headers[attr] = exheaders[attr];\n        }\n        var options = {\n            url: curl.href,\n            method: method,\n            headers: headers,\n            transformResponse: function (data) { return data; }\n        };\n        if (!exoptions.ntlm) {\n            options.validateStatus = null;\n        }\n        if (exoptions.forceMTOM || attachments.length > 0) {\n            var start = uuid_1.v4();\n            var action = null;\n            if (headers['Content-Type'].indexOf('action') > -1) {\n                for (var _i = 0, _a = headers['Content-Type'].split('; '); _i < _a.length; _i++) {\n                    var ct = _a[_i];\n                    if (ct.indexOf('action') > -1) {\n                        action = ct;\n                    }\n                }\n            }\n            headers['Content-Type'] = 'multipart/related; type=\"application/xop+xml\"; start=\"<' + start + '>\"; start-info=\"text/xml\"; boundary=' + uuid_1.v4();\n            if (action) {\n                headers['Content-Type'] = headers['Content-Type'] + '; ' + action;\n            }\n            var multipart_1 = [{\n                    'Content-Type': 'application/xop+xml; charset=UTF-8; type=\"text/xml\"',\n                    'Content-ID': '<' + start + '>',\n                    'body': data\n                }];\n            attachments.forEach(function (attachment) {\n                multipart_1.push({\n                    'Content-Type': attachment.mimetype,\n                    'Content-Transfer-Encoding': 'binary',\n                    'Content-ID': '<' + attachment.contentId + '>',\n                    'Content-Disposition': 'attachment; filename=\"' + attachment.name + '\"',\n                    'body': attachment.body\n                });\n            });\n            // options.multipart = multipart;\n        }\n        else {\n            options.data = data;\n        }\n        for (var attr in newExoptions) {\n            if (mergeOptions.indexOf(attr) !== -1) {\n                for (var header in exoptions[attr]) {\n                    options[attr][header] = exoptions[attr][header];\n                }\n            }\n            else {\n                options[attr] = exoptions[attr];\n            }\n        }\n        debug('Http request: %j', options);\n        return options;\n    };\n    /**\n     * Handle the http response\n     * @param {Object} The req object\n     * @param {Object} res The res object\n     * @param {Object} body The http body\n     * @param {Object} The parsed body\n     */\n    HttpClient.prototype.handleResponse = function (req, res, body) {\n        debug('Http response body: %j', body);\n        if (typeof body === 'string') {\n            // Remove any extra characters that appear before or after the SOAP envelope.\n            var regex = /(?:<\\?[^?]*\\?>[\\s]*)?<([^:]*):Envelope([\\S\\s]*)<\\/\\1:Envelope>/i;\n            var match = body.replace(/<!--[\\s\\S]*?-->/, '').match(regex);\n            if (match) {\n                body = match[0];\n            }\n        }\n        return body;\n    };\n    HttpClient.prototype.request = function (rurl, data, callback, exheaders, exoptions, caller) {\n        var _this_1 = this;\n        var options = this.buildRequest(rurl, data, exheaders, exoptions);\n        var req;\n        if (exoptions !== undefined && exoptions.ntlm) {\n            var ntlmReq = axios_ntlm_1.NtlmClient({\n                username: exoptions.username,\n                password: exoptions.password,\n                workstation: exoptions.workstation || '',\n                domain: exoptions.domain || ''\n            });\n            req = ntlmReq(options);\n        }\n        else {\n            if (this.options.parseReponseAttachments) {\n                options.responseType = 'arraybuffer';\n                options.responseEncoding = 'binary';\n            }\n            req = this._request(options);\n        }\n        var _this = this;\n        req.then(function (res) {\n            var body;\n            if (_this.options.parseReponseAttachments) {\n                var isMultipartResp = res.headers['content-type'] && res.headers['content-type'].toLowerCase().indexOf('multipart/related') > -1;\n                if (isMultipartResp) {\n                    var boundary = void 0;\n                    var parsedContentType = contentTypeParser(res.headers['content-type']);\n                    if (parsedContentType && parsedContentType.parameterList) {\n                        boundary = (parsedContentType.parameterList.find(function (item) { return item.key === 'boundary'; }) || {}).value;\n                    }\n                    if (!boundary) {\n                        return callback(new Error('Missing boundary from content-type'));\n                    }\n                    var multipartResponse = utils_1.parseMTOMResp(res.data, boundary);\n                    // first part is the soap response\n                    var firstPart = multipartResponse.parts.shift();\n                    if (!firstPart || !firstPart.body) {\n                        return callback(new Error('Cannot parse multipart response'));\n                    }\n                    body = firstPart.body.toString('utf8');\n                    res.mtomResponseAttachments = multipartResponse;\n                }\n                else {\n                    body = res.data.toString('utf8');\n                }\n            }\n            res.data = _this_1.handleResponse(req, res, body || res.data);\n            callback(null, res, res.data);\n            return res;\n        }, function (err) {\n            return callback(err);\n        });\n        return req;\n    };\n    HttpClient.prototype.requestStream = function (rurl, data, exheaders, exoptions, caller) {\n        var _this_1 = this;\n        var options = this.buildRequest(rurl, data, exheaders, exoptions);\n        options.responseType = 'stream';\n        var req = this._request(options).then(function (res) {\n            res.data = _this_1.handleResponse(req, res, res.data);\n            return res;\n        });\n        return req;\n    };\n    return HttpClient;\n}());\nexports.HttpClient = HttpClient;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}