{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nexports.__esModule = true;\nexports.ImportElement = exports.IncludeElement = exports.BodyElement = exports.DefinitionsElement = exports.ServiceElement = exports.PortElement = exports.BindingElement = exports.PortTypeElement = exports.OperationElement = exports.TypesElement = exports.SchemaElement = exports.DocumentationElement = exports.MessageElement = exports.AllElement = exports.SequenceElement = exports.SimpleContentElement = exports.ComplexContentElement = exports.ComplexTypeElement = exports.EnumerationElement = exports.ChoiceElement = exports.ExtensionElement = exports.RestrictionElement = exports.SimpleTypeElement = exports.OutputElement = exports.InputElement = exports.AnyElement = exports.ElementElement = exports.Element = void 0;\n\nvar assert_1 = require(\"assert\");\n\nvar debugBuilder = require(\"debug\");\n\nvar _ = require(\"lodash\");\n\nvar utils_1 = require(\"../utils\");\n\nvar debug = debugBuilder('node-soap');\nvar Primitives = {\n  string: 1,\n  boolean: 1,\n  decimal: 1,\n  float: 1,\n  double: 1,\n  anyType: 1,\n  byte: 1,\n  int: 1,\n  long: 1,\n  short: 1,\n  negativeInteger: 1,\n  nonNegativeInteger: 1,\n  positiveInteger: 1,\n  nonPositiveInteger: 1,\n  unsignedByte: 1,\n  unsignedInt: 1,\n  unsignedLong: 1,\n  unsignedShort: 1,\n  duration: 0,\n  dateTime: 0,\n  time: 0,\n  date: 0,\n  gYearMonth: 0,\n  gYear: 0,\n  gMonthDay: 0,\n  gDay: 0,\n  gMonth: 0,\n  hexBinary: 0,\n  base64Binary: 0,\n  anyURI: 0,\n  QName: 0,\n  NOTATION: 0\n};\n\nvar Element =\n/** @class */\nfunction () {\n  function Element(nsName, attrs, options, schemaAttrs) {\n    this.allowedChildren = {};\n    this.children = [];\n    var parts = utils_1.splitQName(nsName);\n    this.nsName = nsName;\n    this.prefix = parts.prefix;\n    this.name = parts.name;\n    this.children = [];\n    this.xmlns = {};\n    this.schemaXmlns = {};\n\n    this._initializeOptions(options);\n\n    for (var key in attrs) {\n      var match = /^xmlns:?(.*)$/.exec(key);\n\n      if (match) {\n        this.xmlns[match[1] ? match[1] : utils_1.TNS_PREFIX] = attrs[key];\n      } else {\n        if (key === 'value') {\n          this[this.valueKey] = attrs[key];\n        } else {\n          this['$' + key] = attrs[key];\n        }\n      }\n    }\n\n    for (var schemaKey in schemaAttrs) {\n      var schemaMatch = /^xmlns:?(.*)$/.exec(schemaKey);\n\n      if (schemaMatch && schemaMatch[1]) {\n        this.schemaXmlns[schemaMatch[1]] = schemaAttrs[schemaKey];\n      }\n    }\n\n    if (this.$targetNamespace !== undefined) {\n      // Add targetNamespace to the mapping\n      this.xmlns[utils_1.TNS_PREFIX] = this.$targetNamespace;\n    }\n\n    this.init();\n  }\n\n  Element.prototype.deleteFixedAttrs = function () {\n    this.children && this.children.length === 0 && delete this.children;\n    this.xmlns && Object.keys(this.xmlns).length === 0 && delete this.xmlns;\n    delete this.nsName;\n    delete this.prefix;\n    delete this.name;\n  };\n\n  Element.prototype.startElement = function (stack, nsName, attrs, options, schemaXmlns) {\n    if (!this.allowedChildren) {\n      return;\n    }\n\n    var ChildClass = this.allowedChildren[utils_1.splitQName(nsName).name];\n\n    if (ChildClass) {\n      var child = new ChildClass(nsName, attrs, options, schemaXmlns);\n      child.init();\n      stack.push(child);\n    } else {\n      this.unexpected(nsName);\n    }\n  };\n\n  Element.prototype.endElement = function (stack, nsName) {\n    if (this.nsName === nsName) {\n      if (stack.length < 2) {\n        return;\n      }\n\n      var parent_1 = stack[stack.length - 2];\n\n      if (this !== stack[0]) {\n        _.defaultsDeep(stack[0].xmlns, this.xmlns); // delete this.xmlns;\n\n\n        parent_1.children.push(this);\n        parent_1.addChild(this);\n      }\n\n      stack.pop();\n    }\n  };\n\n  Element.prototype.addChild = function (child) {\n    return;\n  };\n\n  Element.prototype.unexpected = function (name) {\n    throw new Error('Found unexpected element (' + name + ') inside ' + this.nsName);\n  };\n\n  Element.prototype.description = function (definitions, xmlns) {\n    return this.$name || this.name;\n  };\n\n  Element.prototype.init = function () {};\n\n  Element.prototype._initializeOptions = function (options) {\n    if (options) {\n      this.valueKey = options.valueKey || '$value';\n      this.xmlKey = options.xmlKey || '$xml';\n      this.ignoredNamespaces = options.ignoredNamespaces || [];\n    } else {\n      this.valueKey = '$value';\n      this.xmlKey = '$xml';\n      this.ignoredNamespaces = [];\n    }\n  };\n\n  return Element;\n}();\n\nexports.Element = Element;\n\nvar ElementElement =\n/** @class */\nfunction (_super) {\n  __extends(ElementElement, _super);\n\n  function ElementElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['annotation', 'complexType', 'simpleType']);\n    return _this;\n  }\n\n  ElementElement.prototype.description = function (definitions, xmlns) {\n    var element = {};\n    var name = this.$name; // Check minOccurs / maxOccurs attributes to see if this element is a list\n    // These are default values for an element\n\n    var minOccurs = 1;\n    var maxOccurs = 1;\n\n    if (this.$maxOccurs === 'unbounded') {\n      maxOccurs = Infinity;\n    } else if (Boolean(this.$maxOccurs)) {\n      maxOccurs = parseInt(this.$maxOccurs, 10);\n    }\n\n    if (Boolean(this.$minOccurs)) {\n      minOccurs = parseInt(this.$minOccurs, 10);\n    }\n\n    var isMany = maxOccurs > 1;\n\n    if (isMany) {\n      name += '[]';\n    }\n\n    if (xmlns && xmlns[utils_1.TNS_PREFIX]) {\n      this.$targetNamespace = xmlns[utils_1.TNS_PREFIX];\n    }\n\n    var type = this.$type || this.$ref;\n\n    if (type) {\n      type = utils_1.splitQName(type);\n      var typeName = type.name;\n      var ns = xmlns && xmlns[type.prefix] || (definitions.xmlns[type.prefix] !== undefined || definitions.xmlns[this.targetNSAlias] !== undefined) && this.schemaXmlns[type.prefix] || definitions.xmlns[type.prefix];\n      var schema = definitions.schemas[ns];\n      var typeElement = schema && (this.$type ? schema.complexTypes[typeName] || schema.types[typeName] : schema.elements[typeName]);\n      var typeStorage = this.$type ? definitions.descriptions.types : definitions.descriptions.elements;\n\n      if (ns && definitions.schemas[ns]) {\n        xmlns = definitions.schemas[ns].xmlns;\n      }\n\n      if (typeElement && !(typeName in Primitives)) {\n        if (!(typeName in typeStorage)) {\n          var elem_1 = {};\n          typeStorage[typeName] = elem_1;\n          var description_1 = typeElement.description(definitions, xmlns);\n\n          if (typeof description_1 === 'string') {\n            elem_1 = description_1;\n          } else {\n            Object.keys(description_1).forEach(function (key) {\n              elem_1[key] = description_1[key];\n            });\n          }\n\n          if (this.$ref) {\n            element = elem_1;\n          } else {\n            element[name] = elem_1;\n          }\n\n          if (typeof elem_1 === 'object') {\n            elem_1.targetNSAlias = type.prefix;\n            elem_1.targetNamespace = ns;\n          }\n\n          typeStorage[typeName] = elem_1;\n        } else {\n          if (this.$ref) {\n            element = typeStorage[typeName];\n          } else {\n            element[name] = typeStorage[typeName];\n          }\n        }\n      } else {\n        element[name] = this.$type;\n      }\n    } else {\n      var children = this.children;\n      element[name] = {};\n\n      for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n        var child = children_1[_i];\n\n        if (child instanceof ComplexTypeElement || child instanceof SimpleTypeElement) {\n          element[name] = child.description(definitions, xmlns);\n        }\n      }\n    }\n\n    return element;\n  };\n\n  return ElementElement;\n}(Element);\n\nexports.ElementElement = ElementElement;\n\nvar AnyElement =\n/** @class */\nfunction (_super) {\n  __extends(AnyElement, _super);\n\n  function AnyElement() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return AnyElement;\n}(Element);\n\nexports.AnyElement = AnyElement;\n\nvar InputElement =\n/** @class */\nfunction (_super) {\n  __extends(InputElement, _super);\n\n  function InputElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['body', 'documentation', 'header', 'SecuritySpecRef']);\n    return _this;\n  }\n\n  InputElement.prototype.addChild = function (child) {\n    if (child instanceof BodyElement) {\n      this.use = child.$use;\n\n      if (this.use === 'encoded') {\n        this.encodingStyle = child.$encodingStyle;\n      }\n\n      this.children.pop();\n    }\n  };\n\n  return InputElement;\n}(Element);\n\nexports.InputElement = InputElement;\n\nvar OutputElement =\n/** @class */\nfunction (_super) {\n  __extends(OutputElement, _super);\n\n  function OutputElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['body', 'documentation', 'header', 'SecuritySpecRef']);\n    return _this;\n  }\n\n  OutputElement.prototype.addChild = function (child) {\n    if (child instanceof BodyElement) {\n      this.use = child.$use;\n\n      if (this.use === 'encoded') {\n        this.encodingStyle = child.$encodingStyle;\n      }\n\n      this.children.pop();\n    }\n  };\n\n  return OutputElement;\n}(Element);\n\nexports.OutputElement = OutputElement;\n\nvar SimpleTypeElement =\n/** @class */\nfunction (_super) {\n  __extends(SimpleTypeElement, _super);\n\n  function SimpleTypeElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['restriction']);\n    return _this;\n  }\n\n  SimpleTypeElement.prototype.description = function (definitions) {\n    for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n      var child = _a[_i];\n\n      if (child instanceof RestrictionElement) {\n        return [this.$name, child.description()].filter(Boolean).join('|');\n      }\n    }\n\n    return {};\n  };\n\n  return SimpleTypeElement;\n}(Element);\n\nexports.SimpleTypeElement = SimpleTypeElement;\n\nvar RestrictionElement =\n/** @class */\nfunction (_super) {\n  __extends(RestrictionElement, _super);\n\n  function RestrictionElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['all', 'choice', 'enumeration', 'sequence']);\n    return _this;\n  }\n\n  RestrictionElement.prototype.description = function (definitions, xmlns) {\n    var children = this.children;\n    var desc;\n\n    for (var i = 0, child = void 0; child = children[i]; i++) {\n      if (child instanceof SequenceElement || child instanceof ChoiceElement) {\n        desc = child.description(definitions, xmlns);\n        break;\n      }\n    }\n\n    if (desc && this.$base) {\n      var type = utils_1.splitQName(this.$base);\n      var typeName = type.name;\n      var ns = xmlns && xmlns[type.prefix] || definitions.xmlns[type.prefix];\n      var schema_1 = definitions.schemas[ns];\n      var typeElement_1 = schema_1 && (schema_1.complexTypes[typeName] || schema_1.types[typeName] || schema_1.elements[typeName]);\n\n      desc.getBase = function () {\n        return typeElement_1.description(definitions, schema_1.xmlns);\n      };\n\n      return desc;\n    } // then simple element\n\n\n    var base = this.$base ? this.$base + '|' : '';\n    var restrictions = this.children.map(function (child) {\n      return child.description();\n    }).join(',');\n    return [this.$base, restrictions].filter(Boolean).join('|');\n  };\n\n  return RestrictionElement;\n}(Element);\n\nexports.RestrictionElement = RestrictionElement;\n\nvar ExtensionElement =\n/** @class */\nfunction (_super) {\n  __extends(ExtensionElement, _super);\n\n  function ExtensionElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['all', 'choice', 'sequence']);\n    return _this;\n  }\n\n  ExtensionElement.prototype.description = function (definitions, xmlns) {\n    var desc = {};\n\n    for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n      var child = _a[_i];\n\n      if (child instanceof SequenceElement || child instanceof ChoiceElement) {\n        desc = child.description(definitions, xmlns);\n      }\n    }\n\n    if (this.$base) {\n      var type = utils_1.splitQName(this.$base);\n      var typeName = type.name;\n      var ns = xmlns && xmlns[type.prefix] || definitions.xmlns[type.prefix];\n      var schema = definitions.schemas[ns];\n\n      if (typeName in Primitives) {\n        return this.$base;\n      } else {\n        var typeElement = schema && (schema.complexTypes[typeName] || schema.types[typeName] || schema.elements[typeName]);\n\n        if (typeElement) {\n          var base = typeElement.description(definitions, schema.xmlns);\n          desc = typeof base === 'string' ? base : _.defaults(base, desc);\n        }\n      }\n    }\n\n    return desc;\n  };\n\n  return ExtensionElement;\n}(Element);\n\nexports.ExtensionElement = ExtensionElement;\n\nvar ChoiceElement =\n/** @class */\nfunction (_super) {\n  __extends(ChoiceElement, _super);\n\n  function ChoiceElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['any', 'choice', 'element', 'sequence']);\n    return _this;\n  }\n\n  ChoiceElement.prototype.description = function (definitions, xmlns) {\n    var choice = {};\n\n    for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n      var child = _a[_i];\n      var description = child.description(definitions, xmlns);\n\n      for (var key in description) {\n        choice[key] = description[key];\n      }\n    }\n\n    return choice;\n  };\n\n  return ChoiceElement;\n}(Element);\n\nexports.ChoiceElement = ChoiceElement;\n\nvar EnumerationElement =\n/** @class */\nfunction (_super) {\n  __extends(EnumerationElement, _super);\n\n  function EnumerationElement() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  } // no children\n\n\n  EnumerationElement.prototype.description = function () {\n    return this[this.valueKey];\n  };\n\n  return EnumerationElement;\n}(Element);\n\nexports.EnumerationElement = EnumerationElement;\n\nvar ComplexTypeElement =\n/** @class */\nfunction (_super) {\n  __extends(ComplexTypeElement, _super);\n\n  function ComplexTypeElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['all', 'annotation', 'choice', 'complexContent', 'sequence', 'simpleContent']);\n    return _this;\n  }\n\n  ComplexTypeElement.prototype.description = function (definitions, xmlns) {\n    var children = this.children || [];\n\n    for (var _i = 0, children_2 = children; _i < children_2.length; _i++) {\n      var child = children_2[_i];\n\n      if (child instanceof ChoiceElement || child instanceof SequenceElement || child instanceof AllElement || child instanceof SimpleContentElement || child instanceof ComplexContentElement) {\n        return child.description(definitions, xmlns);\n      }\n    }\n\n    return {};\n  };\n\n  return ComplexTypeElement;\n}(Element);\n\nexports.ComplexTypeElement = ComplexTypeElement;\n\nvar ComplexContentElement =\n/** @class */\nfunction (_super) {\n  __extends(ComplexContentElement, _super);\n\n  function ComplexContentElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['extension']);\n    return _this;\n  }\n\n  ComplexContentElement.prototype.description = function (definitions, xmlns) {\n    for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n      var child = _a[_i];\n\n      if (child instanceof ExtensionElement) {\n        return child.description(definitions, xmlns);\n      }\n    }\n\n    return {};\n  };\n\n  return ComplexContentElement;\n}(Element);\n\nexports.ComplexContentElement = ComplexContentElement;\n\nvar SimpleContentElement =\n/** @class */\nfunction (_super) {\n  __extends(SimpleContentElement, _super);\n\n  function SimpleContentElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['extension']);\n    return _this;\n  }\n\n  SimpleContentElement.prototype.description = function (definitions, xmlns) {\n    for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n      var child = _a[_i];\n\n      if (child instanceof ExtensionElement) {\n        return child.description(definitions, xmlns);\n      }\n    }\n\n    return {};\n  };\n\n  return SimpleContentElement;\n}(Element);\n\nexports.SimpleContentElement = SimpleContentElement;\n\nvar SequenceElement =\n/** @class */\nfunction (_super) {\n  __extends(SequenceElement, _super);\n\n  function SequenceElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['any', 'choice', 'element', 'sequence']);\n    return _this;\n  }\n\n  SequenceElement.prototype.description = function (definitions, xmlns) {\n    var sequence = {};\n\n    for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n      var child = _a[_i];\n\n      if (child instanceof AnyElement) {\n        continue;\n      }\n\n      var description = child.description(definitions, xmlns);\n\n      for (var key in description) {\n        sequence[key] = description[key];\n      }\n    }\n\n    return sequence;\n  };\n\n  return SequenceElement;\n}(Element);\n\nexports.SequenceElement = SequenceElement;\n\nvar AllElement =\n/** @class */\nfunction (_super) {\n  __extends(AllElement, _super);\n\n  function AllElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['choice', 'element']);\n    return _this;\n  }\n\n  AllElement.prototype.description = function (definitions, xmlns) {\n    var sequence = {};\n\n    for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n      var child = _a[_i];\n\n      if (child instanceof AnyElement) {\n        continue;\n      }\n\n      var description = child.description(definitions, xmlns);\n\n      for (var key in description) {\n        sequence[key] = description[key];\n      }\n    }\n\n    return sequence;\n  };\n\n  return AllElement;\n}(Element);\n\nexports.AllElement = AllElement;\n\nvar MessageElement =\n/** @class */\nfunction (_super) {\n  __extends(MessageElement, _super);\n\n  function MessageElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['part', 'documentation']);\n    _this.element = null;\n    _this.parts = null;\n    return _this;\n  }\n\n  MessageElement.prototype.postProcess = function (definitions) {\n    var part = null;\n    var children = this.children || [];\n\n    for (var _i = 0, children_3 = children; _i < children_3.length; _i++) {\n      var child = children_3[_i];\n\n      if (child.name === 'part') {\n        part = child;\n        break;\n      }\n    }\n\n    if (!part) {\n      return;\n    }\n\n    if (part.$element) {\n      var lookupTypes = [];\n      delete this.parts;\n      var nsName = utils_1.splitQName(part.$element);\n      var ns = nsName.prefix;\n      var schema = definitions.schemas[definitions.xmlns[ns]];\n      this.element = schema.elements[nsName.name];\n\n      if (!this.element) {\n        debug(nsName.name + ' is not present in wsdl and cannot be processed correctly.');\n        return;\n      }\n\n      this.element.targetNSAlias = ns;\n      this.element.targetNamespace = definitions.xmlns[ns]; // set the optional $lookupType to be used within `client#_invoke()` when\n      // calling `wsdl#objectToDocumentXML()\n\n      this.element.$lookupType = part.$element;\n      var elementChildren = this.element.children; // get all nested lookup types (only complex types are followed)\n\n      if (elementChildren.length > 0) {\n        for (var _a = 0, elementChildren_1 = elementChildren; _a < elementChildren_1.length; _a++) {\n          var child = elementChildren_1[_a];\n          lookupTypes.push(this._getNestedLookupTypeString(child));\n        }\n      } // if nested lookup types where found, prepare them for furter usage\n\n\n      if (lookupTypes.length > 0) {\n        lookupTypes = lookupTypes.join('_').split('_').filter(function removeEmptyLookupTypes(type) {\n          return type !== '^';\n        });\n        var schemaXmlns = definitions.schemas[this.element.targetNamespace].xmlns;\n\n        for (var i = 0; i < lookupTypes.length; i++) {\n          lookupTypes[i] = this._createLookupTypeObject(lookupTypes[i], schemaXmlns);\n        }\n      }\n\n      this.element.$lookupTypes = lookupTypes;\n\n      if (this.element.$type) {\n        var type = utils_1.splitQName(this.element.$type);\n        var typeNs = schema.xmlns && schema.xmlns[type.prefix] || definitions.xmlns[type.prefix];\n\n        if (typeNs) {\n          if (type.name in Primitives) {// this.element = this.element.$type;\n          } else {\n            // first check local mapping of ns alias to namespace\n            schema = definitions.schemas[typeNs];\n            var ctype = schema.complexTypes[type.name] || schema.types[type.name] || schema.elements[type.name];\n\n            if (ctype) {\n              this.parts = ctype.description(definitions, schema.xmlns);\n            }\n          }\n        }\n      } else {\n        var method = this.element.description(definitions, schema.xmlns);\n        this.parts = method[nsName.name];\n      }\n\n      this.children.splice(0, 1);\n    } else {\n      // rpc encoding\n      this.parts = {};\n      delete this.element;\n\n      for (var i = 0; part = this.children[i]; i++) {\n        if (part.name === 'documentation') {\n          // <wsdl:documentation can be present under <wsdl:message>\n          continue;\n        }\n\n        assert_1.ok(part.name === 'part', 'Expected part element');\n        var nsName = utils_1.splitQName(part.$type);\n        var ns = definitions.xmlns[nsName.prefix];\n        var type = nsName.name;\n        var schemaDefinition = definitions.schemas[ns];\n\n        if (typeof schemaDefinition !== 'undefined') {\n          this.parts[part.$name] = definitions.schemas[ns].types[type] || definitions.schemas[ns].complexTypes[type];\n        } else {\n          this.parts[part.$name] = part.$type;\n        }\n\n        if (typeof this.parts[part.$name] === 'object') {\n          this.parts[part.$name].prefix = nsName.prefix;\n          this.parts[part.$name].xmlns = ns;\n        }\n\n        this.children.splice(i--, 1);\n      }\n    }\n\n    this.deleteFixedAttrs();\n  };\n\n  MessageElement.prototype.description = function (definitions) {\n    if (this.element) {\n      return this.element && this.element.description(definitions);\n    }\n\n    var desc = {};\n    desc[this.$name] = this.parts;\n    return desc;\n  };\n  /**\n   * Takes a given namespaced String(for example: 'alias:property') and creates a lookupType\n   * object for further use in as first (lookup) `parameterTypeObj` within the `objectToXML`\n   * method and provides an entry point for the already existing code in `findChildSchemaObject`.\n   *\n   * @method _createLookupTypeObject\n   * @param {String}            nsString          The NS String (for example \"alias:type\").\n   * @param {Object}            xmlns       The fully parsed `wsdl` definitions object (including all schemas).\n   * @returns {Object}\n   * @private\n   */\n\n\n  MessageElement.prototype._createLookupTypeObject = function (nsString, xmlns) {\n    var splittedNSString = utils_1.splitQName(nsString);\n    var nsAlias = splittedNSString.prefix;\n    var splittedName = splittedNSString.name.split('#');\n    var type = splittedName[0];\n    var name = splittedName[1];\n    return {\n      $namespace: xmlns[nsAlias],\n      $type: nsAlias + ':' + type,\n      $name: name\n    };\n  };\n  /**\n   * Iterates through the element and every nested child to find any defined `$type`\n   * property and returns it in a underscore ('_') separated String (using '^' as default\n   * value if no `$type` property was found).\n   *\n   * @method _getNestedLookupTypeString\n   * @param {Object}            element         The element which (probably) contains nested `$type` values.\n   * @returns {String}\n   * @private\n   */\n\n\n  MessageElement.prototype._getNestedLookupTypeString = function (element) {\n    var _this = this;\n\n    var resolvedType = '^';\n    var excluded = this.ignoredNamespaces.concat('xs'); // do not process $type values wich start with\n\n    if (element.hasOwnProperty('$type') && typeof element.$type === 'string') {\n      if (excluded.indexOf(element.$type.split(':')[0]) === -1) {\n        resolvedType += '_' + element.$type + '#' + element.$name;\n      }\n    }\n\n    if (element.children.length > 0) {\n      element.children.forEach(function (child) {\n        var resolvedChildType = _this._getNestedLookupTypeString(child).replace(/\\^_/, '');\n\n        if (resolvedChildType && typeof resolvedChildType === 'string') {\n          resolvedType += '_' + resolvedChildType;\n        }\n      });\n    }\n\n    return resolvedType;\n  };\n\n  return MessageElement;\n}(Element);\n\nexports.MessageElement = MessageElement;\n\nvar DocumentationElement =\n/** @class */\nfunction (_super) {\n  __extends(DocumentationElement, _super);\n\n  function DocumentationElement() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return DocumentationElement;\n}(Element);\n\nexports.DocumentationElement = DocumentationElement;\n\nvar SchemaElement =\n/** @class */\nfunction (_super) {\n  __extends(SchemaElement, _super);\n\n  function SchemaElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['complexType', 'element', 'import', 'include', 'simpleType']);\n    _this.complexTypes = {};\n    _this.types = {};\n    _this.elements = {};\n    _this.includes = [];\n    return _this;\n  }\n\n  SchemaElement.prototype.merge = function (source) {\n    var _this = this;\n\n    assert_1.ok(source instanceof SchemaElement);\n\n    _.merge(this.complexTypes, source.complexTypes);\n\n    _.merge(this.types, source.types);\n\n    _.merge(this.elements, source.elements);\n\n    _.merge(this.xmlns, source.xmlns); // Merge attributes from source without overwriting our's\n\n\n    _.merge(this, _.pickBy(source, function (value, key) {\n      return key.startsWith('$') && !_this.hasOwnProperty(key);\n    }));\n\n    return this;\n  };\n\n  SchemaElement.prototype.addChild = function (child) {\n    if (child.$name in Primitives) {\n      return;\n    }\n\n    if (child instanceof IncludeElement || child instanceof ImportElement) {\n      var location_1 = child.$schemaLocation || child.$location;\n\n      if (location_1) {\n        this.includes.push({\n          namespace: child.$namespace || child.$targetNamespace || this.$targetNamespace,\n          location: location_1\n        });\n      }\n    } else if (child instanceof ComplexTypeElement) {\n      this.complexTypes[child.$name] = child;\n    } else if (child instanceof ElementElement) {\n      this.elements[child.$name] = child;\n    } else if (child instanceof SimpleTypeElement) {\n      this.types[child.$name] = child;\n    }\n\n    this.children.pop(); // child.deleteFixedAttrs();\n  };\n\n  return SchemaElement;\n}(Element);\n\nexports.SchemaElement = SchemaElement;\n\nvar TypesElement =\n/** @class */\nfunction (_super) {\n  __extends(TypesElement, _super);\n\n  function TypesElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['documentation', 'schema']);\n    _this.schemas = {};\n    return _this;\n  } // fix#325\n\n\n  TypesElement.prototype.addChild = function (child) {\n    var _a;\n\n    assert_1.ok(child instanceof SchemaElement);\n    var targetNamespace = child.$targetNamespace || ((_a = child.includes[0]) === null || _a === void 0 ? void 0 : _a.namespace);\n\n    if (!this.schemas.hasOwnProperty(targetNamespace)) {\n      this.schemas[targetNamespace] = child;\n    } else {\n      console.error('Target-Namespace \"' + targetNamespace + '\" already in use by another Schema!');\n    }\n  };\n\n  return TypesElement;\n}(Element);\n\nexports.TypesElement = TypesElement;\n\nvar OperationElement =\n/** @class */\nfunction (_super) {\n  __extends(OperationElement, _super);\n\n  function OperationElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['documentation', 'fault', 'input', 'operation', 'output']);\n    _this.input = null;\n    _this.output = null;\n    _this.inputSoap = null;\n    _this.outputSoap = null;\n    _this.style = '';\n    _this.soapAction = '';\n    return _this;\n  }\n\n  OperationElement.prototype.addChild = function (child) {\n    if (child instanceof OperationElement) {\n      this.soapAction = child.$soapAction || '';\n      this.style = child.$style || '';\n      this.children.pop();\n    }\n  };\n\n  OperationElement.prototype.postProcess = function (definitions, tag) {\n    var children = this.children;\n\n    for (var i = 0, child = void 0; child = children[i]; i++) {\n      if (child.name !== 'input' && child.name !== 'output') {\n        continue;\n      }\n\n      if (tag === 'binding') {\n        this[child.name] = child;\n        children.splice(i--, 1);\n        continue;\n      }\n\n      var messageName = utils_1.splitQName(child.$message).name;\n      var message = definitions.messages[messageName];\n      message.postProcess(definitions);\n\n      if (message.element) {\n        definitions.messages[message.element.$name] = message;\n        this[child.name] = message.element;\n      } else {\n        this[child.name] = message;\n      }\n\n      children.splice(i--, 1);\n    }\n\n    this.deleteFixedAttrs();\n  };\n\n  OperationElement.prototype.description = function (definitions) {\n    var inputDesc = this.input ? this.input.description(definitions) : null;\n    var outputDesc = this.output ? this.output.description(definitions) : null;\n    return {\n      input: inputDesc && inputDesc[Object.keys(inputDesc)[0]],\n      output: outputDesc && outputDesc[Object.keys(outputDesc)[0]]\n    };\n  };\n\n  return OperationElement;\n}(Element);\n\nexports.OperationElement = OperationElement;\n\nvar PortTypeElement =\n/** @class */\nfunction (_super) {\n  __extends(PortTypeElement, _super);\n\n  function PortTypeElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['documentation', 'operation']);\n    _this.methods = {};\n    return _this;\n  }\n\n  PortTypeElement.prototype.postProcess = function (definitions) {\n    var children = this.children;\n\n    if (typeof children === 'undefined') {\n      return;\n    }\n\n    for (var i = 0, child = void 0; child = children[i]; i++) {\n      if (child.name !== 'operation') {\n        continue;\n      }\n\n      child.postProcess(definitions, 'portType');\n      this.methods[child.$name] = child;\n      children.splice(i--, 1);\n    }\n\n    delete this.$name;\n    this.deleteFixedAttrs();\n  };\n\n  PortTypeElement.prototype.description = function (definitions) {\n    var methods = {};\n\n    for (var name_1 in this.methods) {\n      var method = this.methods[name_1];\n      methods[name_1] = method.description(definitions);\n    }\n\n    return methods;\n  };\n\n  return PortTypeElement;\n}(Element);\n\nexports.PortTypeElement = PortTypeElement;\n\nvar BindingElement =\n/** @class */\nfunction (_super) {\n  __extends(BindingElement, _super);\n\n  function BindingElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['binding', 'documentation', 'operation', 'SecuritySpec']);\n    _this.transport = '';\n    _this.style = '';\n    _this.methods = {};\n    return _this;\n  }\n\n  BindingElement.prototype.addChild = function (child) {\n    if (child.name === 'binding') {\n      this.transport = child.$transport;\n      this.style = child.$style;\n      this.children.pop();\n    }\n  };\n\n  BindingElement.prototype.postProcess = function (definitions) {\n    var type = utils_1.splitQName(this.$type).name;\n    var portType = definitions.portTypes[type];\n    var style = this.style;\n    var children = this.children;\n\n    if (portType) {\n      portType.postProcess(definitions);\n      this.methods = portType.methods;\n\n      for (var i = 0, child = void 0; child = children[i]; i++) {\n        if (child.name !== 'operation') {\n          continue;\n        }\n\n        child.postProcess(definitions, 'binding');\n        children.splice(i--, 1);\n        child.style || (child.style = style);\n        var method = this.methods[child.$name];\n\n        if (method) {\n          method.style = child.style;\n          method.soapAction = child.soapAction;\n          method.inputSoap = child.input || null;\n          method.outputSoap = child.output || null;\n          method.inputSoap && method.inputSoap.deleteFixedAttrs();\n          method.outputSoap && method.outputSoap.deleteFixedAttrs();\n        }\n      }\n    }\n\n    delete this.$name;\n    delete this.$type;\n    this.deleteFixedAttrs();\n  };\n\n  BindingElement.prototype.description = function (definitions) {\n    var methods = {};\n\n    for (var name_2 in this.methods) {\n      var method = this.methods[name_2];\n      methods[name_2] = method.description(definitions);\n    }\n\n    return methods;\n  };\n\n  return BindingElement;\n}(Element);\n\nexports.BindingElement = BindingElement;\n\nvar PortElement =\n/** @class */\nfunction (_super) {\n  __extends(PortElement, _super);\n\n  function PortElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['address', 'documentation']);\n    _this.location = null;\n    return _this;\n  }\n\n  PortElement.prototype.addChild = function (child) {\n    if (child.name === 'address' && typeof child.$location !== 'undefined') {\n      this.location = child.$location;\n    }\n  };\n\n  return PortElement;\n}(Element);\n\nexports.PortElement = PortElement;\n\nvar ServiceElement =\n/** @class */\nfunction (_super) {\n  __extends(ServiceElement, _super);\n\n  function ServiceElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['documentation', 'port']);\n    _this.ports = {};\n    return _this;\n  }\n\n  ServiceElement.prototype.postProcess = function (definitions) {\n    var children = this.children;\n    var bindings = definitions.bindings;\n\n    if (children && children.length > 0) {\n      for (var i = 0, child = void 0; child = children[i]; i++) {\n        if (child.name !== 'port') {\n          continue;\n        }\n\n        var bindingName = utils_1.splitQName(child.$binding).name;\n        var binding = bindings[bindingName];\n\n        if (binding) {\n          binding.postProcess(definitions);\n          this.ports[child.$name] = {\n            location: child.location,\n            binding: binding\n          };\n          children.splice(i--, 1);\n        }\n      }\n    }\n\n    delete this.$name;\n    this.deleteFixedAttrs();\n  };\n\n  ServiceElement.prototype.description = function (definitions) {\n    var ports = {};\n\n    for (var name_3 in this.ports) {\n      var port = this.ports[name_3];\n      ports[name_3] = port.binding.description(definitions);\n    }\n\n    return ports;\n  };\n\n  return ServiceElement;\n}(Element);\n\nexports.ServiceElement = ServiceElement;\n\nvar DefinitionsElement =\n/** @class */\nfunction (_super) {\n  __extends(DefinitionsElement, _super);\n\n  function DefinitionsElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowedChildren = buildAllowedChildren(['binding', 'documentation', 'import', 'message', 'portType', 'service', 'types']);\n    _this.messages = {};\n    _this.portTypes = {};\n    _this.bindings = {};\n    _this.services = {};\n    _this.schemas = {};\n    _this.descriptions = {\n      types: {},\n      elements: {}\n    };\n    return _this;\n  }\n\n  DefinitionsElement.prototype.init = function () {\n    if (this.name !== 'definitions') {\n      this.unexpected(this.nsName);\n    }\n  };\n\n  DefinitionsElement.prototype.addChild = function (child) {\n    if (child instanceof TypesElement) {\n      // Merge types.schemas into definitions.schemas\n      _.merge(this.schemas, child.schemas);\n    } else if (child instanceof MessageElement) {\n      this.messages[child.$name] = child;\n    } else if (child.name === 'import') {\n      var schemaElement = new SchemaElement(child.$namespace, {});\n      schemaElement.init();\n      this.schemas[child.$namespace] = schemaElement;\n      this.schemas[child.$namespace].addChild(child);\n    } else if (child instanceof PortTypeElement) {\n      this.portTypes[child.$name] = child;\n    } else if (child instanceof BindingElement) {\n      if (child.transport === 'http://schemas.xmlsoap.org/soap/http' || child.transport === 'http://www.w3.org/2003/05/soap/bindings/HTTP/') {\n        this.bindings[child.$name] = child;\n      }\n    } else if (child instanceof ServiceElement) {\n      this.services[child.$name] = child;\n    } else if (child instanceof DocumentationElement) {}\n\n    this.children.pop();\n  };\n\n  return DefinitionsElement;\n}(Element);\n\nexports.DefinitionsElement = DefinitionsElement;\n\nvar BodyElement =\n/** @class */\nfunction (_super) {\n  __extends(BodyElement, _super);\n\n  function BodyElement() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return BodyElement;\n}(Element);\n\nexports.BodyElement = BodyElement;\n\nvar IncludeElement =\n/** @class */\nfunction (_super) {\n  __extends(IncludeElement, _super);\n\n  function IncludeElement() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return IncludeElement;\n}(Element);\n\nexports.IncludeElement = IncludeElement;\n\nvar ImportElement =\n/** @class */\nfunction (_super) {\n  __extends(ImportElement, _super);\n\n  function ImportElement() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return ImportElement;\n}(Element);\n\nexports.ImportElement = ImportElement;\nvar ElementTypeMap = {\n  // group: [GroupElement, 'element group'],\n  all: AllElement,\n  any: AnyElement,\n  binding: BindingElement,\n  body: BodyElement,\n  choice: ChoiceElement,\n  complexContent: ComplexContentElement,\n  complexType: ComplexTypeElement,\n  definitions: DefinitionsElement,\n  documentation: DocumentationElement,\n  element: ElementElement,\n  enumeration: EnumerationElement,\n  extension: ExtensionElement,\n  fault: Element,\n  \"import\": ImportElement,\n  include: IncludeElement,\n  input: InputElement,\n  message: MessageElement,\n  operation: OperationElement,\n  output: OutputElement,\n  port: PortElement,\n  portType: PortTypeElement,\n  restriction: RestrictionElement,\n  schema: SchemaElement,\n  sequence: SequenceElement,\n  service: ServiceElement,\n  simpleContent: SimpleContentElement,\n  simpleType: SimpleTypeElement,\n  types: TypesElement\n};\n\nfunction buildAllowedChildren(elementList) {\n  var rtn = {};\n\n  for (var _i = 0, elementList_1 = elementList; _i < elementList_1.length; _i++) {\n    var element = elementList_1[_i];\n    rtn[element.replace(/^_/, '')] = ElementTypeMap[element] || Element;\n  }\n\n  return rtn;\n}","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","exports","__esModule","ImportElement","IncludeElement","BodyElement","DefinitionsElement","ServiceElement","PortElement","BindingElement","PortTypeElement","OperationElement","TypesElement","SchemaElement","DocumentationElement","MessageElement","AllElement","SequenceElement","SimpleContentElement","ComplexContentElement","ComplexTypeElement","EnumerationElement","ChoiceElement","ExtensionElement","RestrictionElement","SimpleTypeElement","OutputElement","InputElement","AnyElement","ElementElement","Element","assert_1","require","debugBuilder","_","utils_1","debug","Primitives","string","boolean","decimal","float","double","anyType","byte","int","long","short","negativeInteger","nonNegativeInteger","positiveInteger","nonPositiveInteger","unsignedByte","unsignedInt","unsignedLong","unsignedShort","duration","dateTime","time","date","gYearMonth","gYear","gMonthDay","gDay","gMonth","hexBinary","base64Binary","anyURI","QName","NOTATION","nsName","attrs","options","schemaAttrs","allowedChildren","children","parts","splitQName","prefix","name","xmlns","schemaXmlns","_initializeOptions","key","match","exec","TNS_PREFIX","valueKey","schemaKey","schemaMatch","$targetNamespace","undefined","init","deleteFixedAttrs","length","keys","startElement","stack","ChildClass","child","push","unexpected","endElement","parent_1","defaultsDeep","addChild","pop","Error","description","definitions","$name","xmlKey","ignoredNamespaces","_super","_this","apply","arguments","buildAllowedChildren","element","minOccurs","maxOccurs","$maxOccurs","Infinity","Boolean","parseInt","$minOccurs","isMany","type","$type","$ref","typeName","ns","targetNSAlias","schema","schemas","typeElement","complexTypes","types","elements","typeStorage","descriptions","elem_1","description_1","forEach","targetNamespace","_i","children_1","use","$use","encodingStyle","$encodingStyle","_a","filter","join","desc","i","$base","schema_1","typeElement_1","getBase","base","restrictions","map","defaults","choice","children_2","sequence","postProcess","part","children_3","$element","lookupTypes","$lookupType","elementChildren","elementChildren_1","_getNestedLookupTypeString","split","removeEmptyLookupTypes","_createLookupTypeObject","$lookupTypes","typeNs","ctype","method","splice","ok","schemaDefinition","nsString","splittedNSString","nsAlias","splittedName","$namespace","resolvedType","excluded","concat","indexOf","resolvedChildType","replace","includes","merge","source","pickBy","value","startsWith","location_1","$schemaLocation","$location","namespace","location","console","error","input","output","inputSoap","outputSoap","style","soapAction","$soapAction","$style","tag","messageName","$message","message","messages","inputDesc","outputDesc","methods","name_1","transport","$transport","portType","portTypes","name_2","ports","bindings","bindingName","$binding","binding","name_3","port","services","schemaElement","ElementTypeMap","all","any","body","complexContent","complexType","documentation","enumeration","extension","fault","include","operation","restriction","service","simpleContent","simpleType","elementList","rtn","elementList_1"],"sources":["C:/Users/ayber/node_modules/soap/lib/wsdl/elements.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nexports.ImportElement = exports.IncludeElement = exports.BodyElement = exports.DefinitionsElement = exports.ServiceElement = exports.PortElement = exports.BindingElement = exports.PortTypeElement = exports.OperationElement = exports.TypesElement = exports.SchemaElement = exports.DocumentationElement = exports.MessageElement = exports.AllElement = exports.SequenceElement = exports.SimpleContentElement = exports.ComplexContentElement = exports.ComplexTypeElement = exports.EnumerationElement = exports.ChoiceElement = exports.ExtensionElement = exports.RestrictionElement = exports.SimpleTypeElement = exports.OutputElement = exports.InputElement = exports.AnyElement = exports.ElementElement = exports.Element = void 0;\nvar assert_1 = require(\"assert\");\nvar debugBuilder = require(\"debug\");\nvar _ = require(\"lodash\");\nvar utils_1 = require(\"../utils\");\nvar debug = debugBuilder('node-soap');\nvar Primitives = {\n    string: 1,\n    boolean: 1,\n    decimal: 1,\n    float: 1,\n    double: 1,\n    anyType: 1,\n    byte: 1,\n    int: 1,\n    long: 1,\n    short: 1,\n    negativeInteger: 1,\n    nonNegativeInteger: 1,\n    positiveInteger: 1,\n    nonPositiveInteger: 1,\n    unsignedByte: 1,\n    unsignedInt: 1,\n    unsignedLong: 1,\n    unsignedShort: 1,\n    duration: 0,\n    dateTime: 0,\n    time: 0,\n    date: 0,\n    gYearMonth: 0,\n    gYear: 0,\n    gMonthDay: 0,\n    gDay: 0,\n    gMonth: 0,\n    hexBinary: 0,\n    base64Binary: 0,\n    anyURI: 0,\n    QName: 0,\n    NOTATION: 0\n};\nvar Element = /** @class */ (function () {\n    function Element(nsName, attrs, options, schemaAttrs) {\n        this.allowedChildren = {};\n        this.children = [];\n        var parts = utils_1.splitQName(nsName);\n        this.nsName = nsName;\n        this.prefix = parts.prefix;\n        this.name = parts.name;\n        this.children = [];\n        this.xmlns = {};\n        this.schemaXmlns = {};\n        this._initializeOptions(options);\n        for (var key in attrs) {\n            var match = /^xmlns:?(.*)$/.exec(key);\n            if (match) {\n                this.xmlns[match[1] ? match[1] : utils_1.TNS_PREFIX] = attrs[key];\n            }\n            else {\n                if (key === 'value') {\n                    this[this.valueKey] = attrs[key];\n                }\n                else {\n                    this['$' + key] = attrs[key];\n                }\n            }\n        }\n        for (var schemaKey in schemaAttrs) {\n            var schemaMatch = /^xmlns:?(.*)$/.exec(schemaKey);\n            if (schemaMatch && schemaMatch[1]) {\n                this.schemaXmlns[schemaMatch[1]] = schemaAttrs[schemaKey];\n            }\n        }\n        if (this.$targetNamespace !== undefined) {\n            // Add targetNamespace to the mapping\n            this.xmlns[utils_1.TNS_PREFIX] = this.$targetNamespace;\n        }\n        this.init();\n    }\n    Element.prototype.deleteFixedAttrs = function () {\n        this.children && this.children.length === 0 && delete this.children;\n        this.xmlns && Object.keys(this.xmlns).length === 0 && delete this.xmlns;\n        delete this.nsName;\n        delete this.prefix;\n        delete this.name;\n    };\n    Element.prototype.startElement = function (stack, nsName, attrs, options, schemaXmlns) {\n        if (!this.allowedChildren) {\n            return;\n        }\n        var ChildClass = this.allowedChildren[utils_1.splitQName(nsName).name];\n        if (ChildClass) {\n            var child = new ChildClass(nsName, attrs, options, schemaXmlns);\n            child.init();\n            stack.push(child);\n        }\n        else {\n            this.unexpected(nsName);\n        }\n    };\n    Element.prototype.endElement = function (stack, nsName) {\n        if (this.nsName === nsName) {\n            if (stack.length < 2) {\n                return;\n            }\n            var parent_1 = stack[stack.length - 2];\n            if (this !== stack[0]) {\n                _.defaultsDeep(stack[0].xmlns, this.xmlns);\n                // delete this.xmlns;\n                parent_1.children.push(this);\n                parent_1.addChild(this);\n            }\n            stack.pop();\n        }\n    };\n    Element.prototype.addChild = function (child) {\n        return;\n    };\n    Element.prototype.unexpected = function (name) {\n        throw new Error('Found unexpected element (' + name + ') inside ' + this.nsName);\n    };\n    Element.prototype.description = function (definitions, xmlns) {\n        return this.$name || this.name;\n    };\n    Element.prototype.init = function () {\n    };\n    Element.prototype._initializeOptions = function (options) {\n        if (options) {\n            this.valueKey = options.valueKey || '$value';\n            this.xmlKey = options.xmlKey || '$xml';\n            this.ignoredNamespaces = options.ignoredNamespaces || [];\n        }\n        else {\n            this.valueKey = '$value';\n            this.xmlKey = '$xml';\n            this.ignoredNamespaces = [];\n        }\n    };\n    return Element;\n}());\nexports.Element = Element;\nvar ElementElement = /** @class */ (function (_super) {\n    __extends(ElementElement, _super);\n    function ElementElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'annotation',\n            'complexType',\n            'simpleType',\n        ]);\n        return _this;\n    }\n    ElementElement.prototype.description = function (definitions, xmlns) {\n        var element = {};\n        var name = this.$name;\n        // Check minOccurs / maxOccurs attributes to see if this element is a list\n        // These are default values for an element\n        var minOccurs = 1;\n        var maxOccurs = 1;\n        if (this.$maxOccurs === 'unbounded') {\n            maxOccurs = Infinity;\n        }\n        else if (Boolean(this.$maxOccurs)) {\n            maxOccurs = parseInt(this.$maxOccurs, 10);\n        }\n        if (Boolean(this.$minOccurs)) {\n            minOccurs = parseInt(this.$minOccurs, 10);\n        }\n        var isMany = maxOccurs > 1;\n        if (isMany) {\n            name += '[]';\n        }\n        if (xmlns && xmlns[utils_1.TNS_PREFIX]) {\n            this.$targetNamespace = xmlns[utils_1.TNS_PREFIX];\n        }\n        var type = this.$type || this.$ref;\n        if (type) {\n            type = utils_1.splitQName(type);\n            var typeName = type.name;\n            var ns = xmlns && xmlns[type.prefix] ||\n                ((definitions.xmlns[type.prefix] !== undefined || definitions.xmlns[this.targetNSAlias] !== undefined) && this.schemaXmlns[type.prefix]) ||\n                definitions.xmlns[type.prefix];\n            var schema = definitions.schemas[ns];\n            var typeElement = schema && (this.$type ? schema.complexTypes[typeName] || schema.types[typeName] : schema.elements[typeName]);\n            var typeStorage = this.$type ? definitions.descriptions.types : definitions.descriptions.elements;\n            if (ns && definitions.schemas[ns]) {\n                xmlns = definitions.schemas[ns].xmlns;\n            }\n            if (typeElement && !(typeName in Primitives)) {\n                if (!(typeName in typeStorage)) {\n                    var elem_1 = {};\n                    typeStorage[typeName] = elem_1;\n                    var description_1 = typeElement.description(definitions, xmlns);\n                    if (typeof description_1 === 'string') {\n                        elem_1 = description_1;\n                    }\n                    else {\n                        Object.keys(description_1).forEach(function (key) {\n                            elem_1[key] = description_1[key];\n                        });\n                    }\n                    if (this.$ref) {\n                        element = elem_1;\n                    }\n                    else {\n                        element[name] = elem_1;\n                    }\n                    if (typeof elem_1 === 'object') {\n                        elem_1.targetNSAlias = type.prefix;\n                        elem_1.targetNamespace = ns;\n                    }\n                    typeStorage[typeName] = elem_1;\n                }\n                else {\n                    if (this.$ref) {\n                        element = typeStorage[typeName];\n                    }\n                    else {\n                        element[name] = typeStorage[typeName];\n                    }\n                }\n            }\n            else {\n                element[name] = this.$type;\n            }\n        }\n        else {\n            var children = this.children;\n            element[name] = {};\n            for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n                var child = children_1[_i];\n                if (child instanceof ComplexTypeElement || child instanceof SimpleTypeElement) {\n                    element[name] = child.description(definitions, xmlns);\n                }\n            }\n        }\n        return element;\n    };\n    return ElementElement;\n}(Element));\nexports.ElementElement = ElementElement;\nvar AnyElement = /** @class */ (function (_super) {\n    __extends(AnyElement, _super);\n    function AnyElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return AnyElement;\n}(Element));\nexports.AnyElement = AnyElement;\nvar InputElement = /** @class */ (function (_super) {\n    __extends(InputElement, _super);\n    function InputElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'body',\n            'documentation',\n            'header',\n            'SecuritySpecRef',\n        ]);\n        return _this;\n    }\n    InputElement.prototype.addChild = function (child) {\n        if (child instanceof BodyElement) {\n            this.use = child.$use;\n            if (this.use === 'encoded') {\n                this.encodingStyle = child.$encodingStyle;\n            }\n            this.children.pop();\n        }\n    };\n    return InputElement;\n}(Element));\nexports.InputElement = InputElement;\nvar OutputElement = /** @class */ (function (_super) {\n    __extends(OutputElement, _super);\n    function OutputElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'body',\n            'documentation',\n            'header',\n            'SecuritySpecRef',\n        ]);\n        return _this;\n    }\n    OutputElement.prototype.addChild = function (child) {\n        if (child instanceof BodyElement) {\n            this.use = child.$use;\n            if (this.use === 'encoded') {\n                this.encodingStyle = child.$encodingStyle;\n            }\n            this.children.pop();\n        }\n    };\n    return OutputElement;\n}(Element));\nexports.OutputElement = OutputElement;\nvar SimpleTypeElement = /** @class */ (function (_super) {\n    __extends(SimpleTypeElement, _super);\n    function SimpleTypeElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'restriction',\n        ]);\n        return _this;\n    }\n    SimpleTypeElement.prototype.description = function (definitions) {\n        for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            if (child instanceof RestrictionElement) {\n                return [this.$name, child.description()].filter(Boolean).join('|');\n            }\n        }\n        return {};\n    };\n    return SimpleTypeElement;\n}(Element));\nexports.SimpleTypeElement = SimpleTypeElement;\nvar RestrictionElement = /** @class */ (function (_super) {\n    __extends(RestrictionElement, _super);\n    function RestrictionElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'all',\n            'choice',\n            'enumeration',\n            'sequence',\n        ]);\n        return _this;\n    }\n    RestrictionElement.prototype.description = function (definitions, xmlns) {\n        var children = this.children;\n        var desc;\n        for (var i = 0, child = void 0; child = children[i]; i++) {\n            if (child instanceof SequenceElement || child instanceof ChoiceElement) {\n                desc = child.description(definitions, xmlns);\n                break;\n            }\n        }\n        if (desc && this.$base) {\n            var type = utils_1.splitQName(this.$base);\n            var typeName = type.name;\n            var ns = xmlns && xmlns[type.prefix] || definitions.xmlns[type.prefix];\n            var schema_1 = definitions.schemas[ns];\n            var typeElement_1 = schema_1 && (schema_1.complexTypes[typeName] || schema_1.types[typeName] || schema_1.elements[typeName]);\n            desc.getBase = function () {\n                return typeElement_1.description(definitions, schema_1.xmlns);\n            };\n            return desc;\n        }\n        // then simple element\n        var base = this.$base ? this.$base + '|' : '';\n        var restrictions = this.children.map(function (child) {\n            return child.description();\n        }).join(',');\n        return [this.$base, restrictions].filter(Boolean).join('|');\n    };\n    return RestrictionElement;\n}(Element));\nexports.RestrictionElement = RestrictionElement;\nvar ExtensionElement = /** @class */ (function (_super) {\n    __extends(ExtensionElement, _super);\n    function ExtensionElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'all',\n            'choice',\n            'sequence',\n        ]);\n        return _this;\n    }\n    ExtensionElement.prototype.description = function (definitions, xmlns) {\n        var desc = {};\n        for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            if (child instanceof SequenceElement || child instanceof ChoiceElement) {\n                desc = child.description(definitions, xmlns);\n            }\n        }\n        if (this.$base) {\n            var type = utils_1.splitQName(this.$base);\n            var typeName = type.name;\n            var ns = xmlns && xmlns[type.prefix] || definitions.xmlns[type.prefix];\n            var schema = definitions.schemas[ns];\n            if (typeName in Primitives) {\n                return this.$base;\n            }\n            else {\n                var typeElement = schema && (schema.complexTypes[typeName] ||\n                    schema.types[typeName] ||\n                    schema.elements[typeName]);\n                if (typeElement) {\n                    var base = typeElement.description(definitions, schema.xmlns);\n                    desc = typeof base === 'string' ? base : _.defaults(base, desc);\n                }\n            }\n        }\n        return desc;\n    };\n    return ExtensionElement;\n}(Element));\nexports.ExtensionElement = ExtensionElement;\nvar ChoiceElement = /** @class */ (function (_super) {\n    __extends(ChoiceElement, _super);\n    function ChoiceElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'any',\n            'choice',\n            'element',\n            'sequence',\n        ]);\n        return _this;\n    }\n    ChoiceElement.prototype.description = function (definitions, xmlns) {\n        var choice = {};\n        for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            var description = child.description(definitions, xmlns);\n            for (var key in description) {\n                choice[key] = description[key];\n            }\n        }\n        return choice;\n    };\n    return ChoiceElement;\n}(Element));\nexports.ChoiceElement = ChoiceElement;\nvar EnumerationElement = /** @class */ (function (_super) {\n    __extends(EnumerationElement, _super);\n    function EnumerationElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // no children\n    EnumerationElement.prototype.description = function () {\n        return this[this.valueKey];\n    };\n    return EnumerationElement;\n}(Element));\nexports.EnumerationElement = EnumerationElement;\nvar ComplexTypeElement = /** @class */ (function (_super) {\n    __extends(ComplexTypeElement, _super);\n    function ComplexTypeElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'all',\n            'annotation',\n            'choice',\n            'complexContent',\n            'sequence',\n            'simpleContent',\n        ]);\n        return _this;\n    }\n    ComplexTypeElement.prototype.description = function (definitions, xmlns) {\n        var children = this.children || [];\n        for (var _i = 0, children_2 = children; _i < children_2.length; _i++) {\n            var child = children_2[_i];\n            if (child instanceof ChoiceElement ||\n                child instanceof SequenceElement ||\n                child instanceof AllElement ||\n                child instanceof SimpleContentElement ||\n                child instanceof ComplexContentElement) {\n                return child.description(definitions, xmlns);\n            }\n        }\n        return {};\n    };\n    return ComplexTypeElement;\n}(Element));\nexports.ComplexTypeElement = ComplexTypeElement;\nvar ComplexContentElement = /** @class */ (function (_super) {\n    __extends(ComplexContentElement, _super);\n    function ComplexContentElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'extension',\n        ]);\n        return _this;\n    }\n    ComplexContentElement.prototype.description = function (definitions, xmlns) {\n        for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            if (child instanceof ExtensionElement) {\n                return child.description(definitions, xmlns);\n            }\n        }\n        return {};\n    };\n    return ComplexContentElement;\n}(Element));\nexports.ComplexContentElement = ComplexContentElement;\nvar SimpleContentElement = /** @class */ (function (_super) {\n    __extends(SimpleContentElement, _super);\n    function SimpleContentElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'extension',\n        ]);\n        return _this;\n    }\n    SimpleContentElement.prototype.description = function (definitions, xmlns) {\n        for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            if (child instanceof ExtensionElement) {\n                return child.description(definitions, xmlns);\n            }\n        }\n        return {};\n    };\n    return SimpleContentElement;\n}(Element));\nexports.SimpleContentElement = SimpleContentElement;\nvar SequenceElement = /** @class */ (function (_super) {\n    __extends(SequenceElement, _super);\n    function SequenceElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'any',\n            'choice',\n            'element',\n            'sequence',\n        ]);\n        return _this;\n    }\n    SequenceElement.prototype.description = function (definitions, xmlns) {\n        var sequence = {};\n        for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            if (child instanceof AnyElement) {\n                continue;\n            }\n            var description = child.description(definitions, xmlns);\n            for (var key in description) {\n                sequence[key] = description[key];\n            }\n        }\n        return sequence;\n    };\n    return SequenceElement;\n}(Element));\nexports.SequenceElement = SequenceElement;\nvar AllElement = /** @class */ (function (_super) {\n    __extends(AllElement, _super);\n    function AllElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'choice',\n            'element',\n        ]);\n        return _this;\n    }\n    AllElement.prototype.description = function (definitions, xmlns) {\n        var sequence = {};\n        for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            if (child instanceof AnyElement) {\n                continue;\n            }\n            var description = child.description(definitions, xmlns);\n            for (var key in description) {\n                sequence[key] = description[key];\n            }\n        }\n        return sequence;\n    };\n    return AllElement;\n}(Element));\nexports.AllElement = AllElement;\nvar MessageElement = /** @class */ (function (_super) {\n    __extends(MessageElement, _super);\n    function MessageElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'part',\n            'documentation',\n        ]);\n        _this.element = null;\n        _this.parts = null;\n        return _this;\n    }\n    MessageElement.prototype.postProcess = function (definitions) {\n        var part = null;\n        var children = this.children || [];\n        for (var _i = 0, children_3 = children; _i < children_3.length; _i++) {\n            var child = children_3[_i];\n            if (child.name === 'part') {\n                part = child;\n                break;\n            }\n        }\n        if (!part) {\n            return;\n        }\n        if (part.$element) {\n            var lookupTypes = [];\n            delete this.parts;\n            var nsName = utils_1.splitQName(part.$element);\n            var ns = nsName.prefix;\n            var schema = definitions.schemas[definitions.xmlns[ns]];\n            this.element = schema.elements[nsName.name];\n            if (!this.element) {\n                debug(nsName.name + ' is not present in wsdl and cannot be processed correctly.');\n                return;\n            }\n            this.element.targetNSAlias = ns;\n            this.element.targetNamespace = definitions.xmlns[ns];\n            // set the optional $lookupType to be used within `client#_invoke()` when\n            // calling `wsdl#objectToDocumentXML()\n            this.element.$lookupType = part.$element;\n            var elementChildren = this.element.children;\n            // get all nested lookup types (only complex types are followed)\n            if (elementChildren.length > 0) {\n                for (var _a = 0, elementChildren_1 = elementChildren; _a < elementChildren_1.length; _a++) {\n                    var child = elementChildren_1[_a];\n                    lookupTypes.push(this._getNestedLookupTypeString(child));\n                }\n            }\n            // if nested lookup types where found, prepare them for furter usage\n            if (lookupTypes.length > 0) {\n                lookupTypes = lookupTypes.\n                    join('_').\n                    split('_').\n                    filter(function removeEmptyLookupTypes(type) {\n                    return type !== '^';\n                });\n                var schemaXmlns = definitions.schemas[this.element.targetNamespace].xmlns;\n                for (var i = 0; i < lookupTypes.length; i++) {\n                    lookupTypes[i] = this._createLookupTypeObject(lookupTypes[i], schemaXmlns);\n                }\n            }\n            this.element.$lookupTypes = lookupTypes;\n            if (this.element.$type) {\n                var type = utils_1.splitQName(this.element.$type);\n                var typeNs = schema.xmlns && schema.xmlns[type.prefix] || definitions.xmlns[type.prefix];\n                if (typeNs) {\n                    if (type.name in Primitives) {\n                        // this.element = this.element.$type;\n                    }\n                    else {\n                        // first check local mapping of ns alias to namespace\n                        schema = definitions.schemas[typeNs];\n                        var ctype = schema.complexTypes[type.name] || schema.types[type.name] || schema.elements[type.name];\n                        if (ctype) {\n                            this.parts = ctype.description(definitions, schema.xmlns);\n                        }\n                    }\n                }\n            }\n            else {\n                var method = this.element.description(definitions, schema.xmlns);\n                this.parts = method[nsName.name];\n            }\n            this.children.splice(0, 1);\n        }\n        else {\n            // rpc encoding\n            this.parts = {};\n            delete this.element;\n            for (var i = 0; part = this.children[i]; i++) {\n                if (part.name === 'documentation') {\n                    // <wsdl:documentation can be present under <wsdl:message>\n                    continue;\n                }\n                assert_1.ok(part.name === 'part', 'Expected part element');\n                var nsName = utils_1.splitQName(part.$type);\n                var ns = definitions.xmlns[nsName.prefix];\n                var type = nsName.name;\n                var schemaDefinition = definitions.schemas[ns];\n                if (typeof schemaDefinition !== 'undefined') {\n                    this.parts[part.$name] = definitions.schemas[ns].types[type] || definitions.schemas[ns].complexTypes[type];\n                }\n                else {\n                    this.parts[part.$name] = part.$type;\n                }\n                if (typeof this.parts[part.$name] === 'object') {\n                    this.parts[part.$name].prefix = nsName.prefix;\n                    this.parts[part.$name].xmlns = ns;\n                }\n                this.children.splice(i--, 1);\n            }\n        }\n        this.deleteFixedAttrs();\n    };\n    MessageElement.prototype.description = function (definitions) {\n        if (this.element) {\n            return this.element && this.element.description(definitions);\n        }\n        var desc = {};\n        desc[this.$name] = this.parts;\n        return desc;\n    };\n    /**\n     * Takes a given namespaced String(for example: 'alias:property') and creates a lookupType\n     * object for further use in as first (lookup) `parameterTypeObj` within the `objectToXML`\n     * method and provides an entry point for the already existing code in `findChildSchemaObject`.\n     *\n     * @method _createLookupTypeObject\n     * @param {String}            nsString          The NS String (for example \"alias:type\").\n     * @param {Object}            xmlns       The fully parsed `wsdl` definitions object (including all schemas).\n     * @returns {Object}\n     * @private\n     */\n    MessageElement.prototype._createLookupTypeObject = function (nsString, xmlns) {\n        var splittedNSString = utils_1.splitQName(nsString);\n        var nsAlias = splittedNSString.prefix;\n        var splittedName = splittedNSString.name.split('#');\n        var type = splittedName[0];\n        var name = splittedName[1];\n        return {\n            $namespace: xmlns[nsAlias],\n            $type: nsAlias + ':' + type,\n            $name: name\n        };\n    };\n    /**\n     * Iterates through the element and every nested child to find any defined `$type`\n     * property and returns it in a underscore ('_') separated String (using '^' as default\n     * value if no `$type` property was found).\n     *\n     * @method _getNestedLookupTypeString\n     * @param {Object}            element         The element which (probably) contains nested `$type` values.\n     * @returns {String}\n     * @private\n     */\n    MessageElement.prototype._getNestedLookupTypeString = function (element) {\n        var _this = this;\n        var resolvedType = '^';\n        var excluded = this.ignoredNamespaces.concat('xs'); // do not process $type values wich start with\n        if (element.hasOwnProperty('$type') && typeof element.$type === 'string') {\n            if (excluded.indexOf(element.$type.split(':')[0]) === -1) {\n                resolvedType += ('_' + element.$type + '#' + element.$name);\n            }\n        }\n        if (element.children.length > 0) {\n            element.children.forEach(function (child) {\n                var resolvedChildType = _this._getNestedLookupTypeString(child).replace(/\\^_/, '');\n                if (resolvedChildType && typeof resolvedChildType === 'string') {\n                    resolvedType += ('_' + resolvedChildType);\n                }\n            });\n        }\n        return resolvedType;\n    };\n    return MessageElement;\n}(Element));\nexports.MessageElement = MessageElement;\nvar DocumentationElement = /** @class */ (function (_super) {\n    __extends(DocumentationElement, _super);\n    function DocumentationElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return DocumentationElement;\n}(Element));\nexports.DocumentationElement = DocumentationElement;\nvar SchemaElement = /** @class */ (function (_super) {\n    __extends(SchemaElement, _super);\n    function SchemaElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'complexType',\n            'element',\n            'import',\n            'include',\n            'simpleType',\n        ]);\n        _this.complexTypes = {};\n        _this.types = {};\n        _this.elements = {};\n        _this.includes = [];\n        return _this;\n    }\n    SchemaElement.prototype.merge = function (source) {\n        var _this = this;\n        assert_1.ok(source instanceof SchemaElement);\n        _.merge(this.complexTypes, source.complexTypes);\n        _.merge(this.types, source.types);\n        _.merge(this.elements, source.elements);\n        _.merge(this.xmlns, source.xmlns);\n        // Merge attributes from source without overwriting our's\n        _.merge(this, _.pickBy(source, function (value, key) {\n            return key.startsWith('$') && !_this.hasOwnProperty(key);\n        }));\n        return this;\n    };\n    SchemaElement.prototype.addChild = function (child) {\n        if (child.$name in Primitives) {\n            return;\n        }\n        if (child instanceof IncludeElement || child instanceof ImportElement) {\n            var location_1 = child.$schemaLocation || child.$location;\n            if (location_1) {\n                this.includes.push({\n                    namespace: child.$namespace || child.$targetNamespace || this.$targetNamespace,\n                    location: location_1\n                });\n            }\n        }\n        else if (child instanceof ComplexTypeElement) {\n            this.complexTypes[child.$name] = child;\n        }\n        else if (child instanceof ElementElement) {\n            this.elements[child.$name] = child;\n        }\n        else if (child instanceof SimpleTypeElement) {\n            this.types[child.$name] = child;\n        }\n        this.children.pop();\n        // child.deleteFixedAttrs();\n    };\n    return SchemaElement;\n}(Element));\nexports.SchemaElement = SchemaElement;\nvar TypesElement = /** @class */ (function (_super) {\n    __extends(TypesElement, _super);\n    function TypesElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'documentation',\n            'schema',\n        ]);\n        _this.schemas = {};\n        return _this;\n    }\n    // fix#325\n    TypesElement.prototype.addChild = function (child) {\n        var _a;\n        assert_1.ok(child instanceof SchemaElement);\n        var targetNamespace = child.$targetNamespace || ((_a = child.includes[0]) === null || _a === void 0 ? void 0 : _a.namespace);\n        if (!this.schemas.hasOwnProperty(targetNamespace)) {\n            this.schemas[targetNamespace] = child;\n        }\n        else {\n            console.error('Target-Namespace \"' + targetNamespace + '\" already in use by another Schema!');\n        }\n    };\n    return TypesElement;\n}(Element));\nexports.TypesElement = TypesElement;\nvar OperationElement = /** @class */ (function (_super) {\n    __extends(OperationElement, _super);\n    function OperationElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'documentation',\n            'fault',\n            'input',\n            'operation',\n            'output',\n        ]);\n        _this.input = null;\n        _this.output = null;\n        _this.inputSoap = null;\n        _this.outputSoap = null;\n        _this.style = '';\n        _this.soapAction = '';\n        return _this;\n    }\n    OperationElement.prototype.addChild = function (child) {\n        if (child instanceof OperationElement) {\n            this.soapAction = child.$soapAction || '';\n            this.style = child.$style || '';\n            this.children.pop();\n        }\n    };\n    OperationElement.prototype.postProcess = function (definitions, tag) {\n        var children = this.children;\n        for (var i = 0, child = void 0; child = children[i]; i++) {\n            if (child.name !== 'input' && child.name !== 'output') {\n                continue;\n            }\n            if (tag === 'binding') {\n                this[child.name] = child;\n                children.splice(i--, 1);\n                continue;\n            }\n            var messageName = utils_1.splitQName(child.$message).name;\n            var message = definitions.messages[messageName];\n            message.postProcess(definitions);\n            if (message.element) {\n                definitions.messages[message.element.$name] = message;\n                this[child.name] = message.element;\n            }\n            else {\n                this[child.name] = message;\n            }\n            children.splice(i--, 1);\n        }\n        this.deleteFixedAttrs();\n    };\n    OperationElement.prototype.description = function (definitions) {\n        var inputDesc = this.input ? this.input.description(definitions) : null;\n        var outputDesc = this.output ? this.output.description(definitions) : null;\n        return {\n            input: inputDesc && inputDesc[Object.keys(inputDesc)[0]],\n            output: outputDesc && outputDesc[Object.keys(outputDesc)[0]]\n        };\n    };\n    return OperationElement;\n}(Element));\nexports.OperationElement = OperationElement;\nvar PortTypeElement = /** @class */ (function (_super) {\n    __extends(PortTypeElement, _super);\n    function PortTypeElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'documentation',\n            'operation',\n        ]);\n        _this.methods = {};\n        return _this;\n    }\n    PortTypeElement.prototype.postProcess = function (definitions) {\n        var children = this.children;\n        if (typeof children === 'undefined') {\n            return;\n        }\n        for (var i = 0, child = void 0; child = children[i]; i++) {\n            if (child.name !== 'operation') {\n                continue;\n            }\n            child.postProcess(definitions, 'portType');\n            this.methods[child.$name] = child;\n            children.splice(i--, 1);\n        }\n        delete this.$name;\n        this.deleteFixedAttrs();\n    };\n    PortTypeElement.prototype.description = function (definitions) {\n        var methods = {};\n        for (var name_1 in this.methods) {\n            var method = this.methods[name_1];\n            methods[name_1] = method.description(definitions);\n        }\n        return methods;\n    };\n    return PortTypeElement;\n}(Element));\nexports.PortTypeElement = PortTypeElement;\nvar BindingElement = /** @class */ (function (_super) {\n    __extends(BindingElement, _super);\n    function BindingElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'binding',\n            'documentation',\n            'operation',\n            'SecuritySpec',\n        ]);\n        _this.transport = '';\n        _this.style = '';\n        _this.methods = {};\n        return _this;\n    }\n    BindingElement.prototype.addChild = function (child) {\n        if (child.name === 'binding') {\n            this.transport = child.$transport;\n            this.style = child.$style;\n            this.children.pop();\n        }\n    };\n    BindingElement.prototype.postProcess = function (definitions) {\n        var type = utils_1.splitQName(this.$type).name;\n        var portType = definitions.portTypes[type];\n        var style = this.style;\n        var children = this.children;\n        if (portType) {\n            portType.postProcess(definitions);\n            this.methods = portType.methods;\n            for (var i = 0, child = void 0; child = children[i]; i++) {\n                if (child.name !== 'operation') {\n                    continue;\n                }\n                child.postProcess(definitions, 'binding');\n                children.splice(i--, 1);\n                child.style || (child.style = style);\n                var method = this.methods[child.$name];\n                if (method) {\n                    method.style = child.style;\n                    method.soapAction = child.soapAction;\n                    method.inputSoap = child.input || null;\n                    method.outputSoap = child.output || null;\n                    method.inputSoap && method.inputSoap.deleteFixedAttrs();\n                    method.outputSoap && method.outputSoap.deleteFixedAttrs();\n                }\n            }\n        }\n        delete this.$name;\n        delete this.$type;\n        this.deleteFixedAttrs();\n    };\n    BindingElement.prototype.description = function (definitions) {\n        var methods = {};\n        for (var name_2 in this.methods) {\n            var method = this.methods[name_2];\n            methods[name_2] = method.description(definitions);\n        }\n        return methods;\n    };\n    return BindingElement;\n}(Element));\nexports.BindingElement = BindingElement;\nvar PortElement = /** @class */ (function (_super) {\n    __extends(PortElement, _super);\n    function PortElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'address',\n            'documentation',\n        ]);\n        _this.location = null;\n        return _this;\n    }\n    PortElement.prototype.addChild = function (child) {\n        if (child.name === 'address' && typeof (child.$location) !== 'undefined') {\n            this.location = child.$location;\n        }\n    };\n    return PortElement;\n}(Element));\nexports.PortElement = PortElement;\nvar ServiceElement = /** @class */ (function (_super) {\n    __extends(ServiceElement, _super);\n    function ServiceElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'documentation',\n            'port',\n        ]);\n        _this.ports = {};\n        return _this;\n    }\n    ServiceElement.prototype.postProcess = function (definitions) {\n        var children = this.children;\n        var bindings = definitions.bindings;\n        if (children && children.length > 0) {\n            for (var i = 0, child = void 0; child = children[i]; i++) {\n                if (child.name !== 'port') {\n                    continue;\n                }\n                var bindingName = utils_1.splitQName(child.$binding).name;\n                var binding = bindings[bindingName];\n                if (binding) {\n                    binding.postProcess(definitions);\n                    this.ports[child.$name] = {\n                        location: child.location,\n                        binding: binding\n                    };\n                    children.splice(i--, 1);\n                }\n            }\n        }\n        delete this.$name;\n        this.deleteFixedAttrs();\n    };\n    ServiceElement.prototype.description = function (definitions) {\n        var ports = {};\n        for (var name_3 in this.ports) {\n            var port = this.ports[name_3];\n            ports[name_3] = port.binding.description(definitions);\n        }\n        return ports;\n    };\n    return ServiceElement;\n}(Element));\nexports.ServiceElement = ServiceElement;\nvar DefinitionsElement = /** @class */ (function (_super) {\n    __extends(DefinitionsElement, _super);\n    function DefinitionsElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedChildren = buildAllowedChildren([\n            'binding',\n            'documentation',\n            'import',\n            'message',\n            'portType',\n            'service',\n            'types',\n        ]);\n        _this.messages = {};\n        _this.portTypes = {};\n        _this.bindings = {};\n        _this.services = {};\n        _this.schemas = {};\n        _this.descriptions = {\n            types: {},\n            elements: {}\n        };\n        return _this;\n    }\n    DefinitionsElement.prototype.init = function () {\n        if (this.name !== 'definitions') {\n            this.unexpected(this.nsName);\n        }\n    };\n    DefinitionsElement.prototype.addChild = function (child) {\n        if (child instanceof TypesElement) {\n            // Merge types.schemas into definitions.schemas\n            _.merge(this.schemas, child.schemas);\n        }\n        else if (child instanceof MessageElement) {\n            this.messages[child.$name] = child;\n        }\n        else if (child.name === 'import') {\n            var schemaElement = new SchemaElement(child.$namespace, {});\n            schemaElement.init();\n            this.schemas[child.$namespace] = schemaElement;\n            this.schemas[child.$namespace].addChild(child);\n        }\n        else if (child instanceof PortTypeElement) {\n            this.portTypes[child.$name] = child;\n        }\n        else if (child instanceof BindingElement) {\n            if (child.transport === 'http://schemas.xmlsoap.org/soap/http' ||\n                child.transport === 'http://www.w3.org/2003/05/soap/bindings/HTTP/') {\n                this.bindings[child.$name] = child;\n            }\n        }\n        else if (child instanceof ServiceElement) {\n            this.services[child.$name] = child;\n        }\n        else if (child instanceof DocumentationElement) {\n        }\n        this.children.pop();\n    };\n    return DefinitionsElement;\n}(Element));\nexports.DefinitionsElement = DefinitionsElement;\nvar BodyElement = /** @class */ (function (_super) {\n    __extends(BodyElement, _super);\n    function BodyElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return BodyElement;\n}(Element));\nexports.BodyElement = BodyElement;\nvar IncludeElement = /** @class */ (function (_super) {\n    __extends(IncludeElement, _super);\n    function IncludeElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return IncludeElement;\n}(Element));\nexports.IncludeElement = IncludeElement;\nvar ImportElement = /** @class */ (function (_super) {\n    __extends(ImportElement, _super);\n    function ImportElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return ImportElement;\n}(Element));\nexports.ImportElement = ImportElement;\nvar ElementTypeMap = {\n    // group: [GroupElement, 'element group'],\n    all: AllElement,\n    any: AnyElement,\n    binding: BindingElement,\n    body: BodyElement,\n    choice: ChoiceElement,\n    complexContent: ComplexContentElement,\n    complexType: ComplexTypeElement,\n    definitions: DefinitionsElement,\n    documentation: DocumentationElement,\n    element: ElementElement,\n    enumeration: EnumerationElement,\n    extension: ExtensionElement,\n    fault: Element,\n    \"import\": ImportElement,\n    include: IncludeElement,\n    input: InputElement,\n    message: MessageElement,\n    operation: OperationElement,\n    output: OutputElement,\n    port: PortElement,\n    portType: PortTypeElement,\n    restriction: RestrictionElement,\n    schema: SchemaElement,\n    sequence: SequenceElement,\n    service: ServiceElement,\n    simpleContent: SimpleContentElement,\n    simpleType: SimpleTypeElement,\n    types: TypesElement\n};\nfunction buildAllowedChildren(elementList) {\n    var rtn = {};\n    for (var _i = 0, elementList_1 = elementList; _i < elementList_1.length; _i++) {\n        var element = elementList_1[_i];\n        rtn[element.replace(/^_/, '')] = ElementTypeMap[element] || Element;\n    }\n    return rtn;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}