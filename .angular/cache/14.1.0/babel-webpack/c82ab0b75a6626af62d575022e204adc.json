{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.ClientSSLSecurity = void 0;\n\nvar fs = require(\"fs\");\n\nvar https = require(\"https\");\n\nvar _ = require(\"lodash\");\n/**\n * activates SSL for an already existing client\n *\n * @module ClientSSLSecurity\n * @param {Buffer|String}   key\n * @param {Buffer|String}   cert\n * @param {Buffer|String|Array}   [ca]\n * @param {Object}          [defaults]\n * @constructor\n */\n\n\nvar ClientSSLSecurity =\n/** @class */\nfunction () {\n  function ClientSSLSecurity(key, cert, ca, defaults) {\n    if (key) {\n      if (Buffer.isBuffer(key)) {\n        this.key = key;\n      } else if (typeof key === 'string') {\n        this.key = fs.readFileSync(key);\n      } else {\n        throw new Error('key should be a buffer or a string!');\n      }\n    }\n\n    if (cert) {\n      if (Buffer.isBuffer(cert)) {\n        this.cert = cert;\n      } else if (typeof cert === 'string') {\n        this.cert = fs.readFileSync(cert);\n      } else {\n        throw new Error('cert should be a buffer or a string!');\n      }\n    }\n\n    if (ca) {\n      if (Buffer.isBuffer(ca) || Array.isArray(ca)) {\n        this.ca = ca;\n      } else if (typeof ca === 'string') {\n        this.ca = fs.readFileSync(ca);\n      } else {\n        defaults = ca;\n        this.ca = null;\n      }\n    }\n\n    this.defaults = {};\n\n    _.merge(this.defaults, defaults);\n\n    this.agent = null;\n  }\n\n  ClientSSLSecurity.prototype.toXML = function () {\n    return '';\n  };\n\n  ClientSSLSecurity.prototype.addOptions = function (options) {\n    var httpsAgent = null;\n    options.key = this.key;\n    options.cert = this.cert;\n    options.ca = this.ca;\n\n    _.merge(options, this.defaults);\n\n    if (!!options.forever) {\n      if (!this.agent) {\n        options.keepAlive = true;\n        this.agent = new https.Agent(options);\n      }\n\n      httpsAgent = this.agent;\n    } else {\n      httpsAgent = new https.Agent(options);\n    }\n\n    options.httpsAgent = httpsAgent;\n  };\n\n  return ClientSSLSecurity;\n}();\n\nexports.ClientSSLSecurity = ClientSSLSecurity;","map":{"version":3,"names":["exports","__esModule","ClientSSLSecurity","fs","require","https","_","key","cert","ca","defaults","Buffer","isBuffer","readFileSync","Error","Array","isArray","merge","agent","prototype","toXML","addOptions","options","httpsAgent","forever","keepAlive","Agent"],"sources":["C:/Users/ayber/node_modules/soap/lib/security/ClientSSLSecurity.js"],"sourcesContent":["\"use strict\";\nexports.__esModule = true;\nexports.ClientSSLSecurity = void 0;\nvar fs = require(\"fs\");\nvar https = require(\"https\");\nvar _ = require(\"lodash\");\n/**\n * activates SSL for an already existing client\n *\n * @module ClientSSLSecurity\n * @param {Buffer|String}   key\n * @param {Buffer|String}   cert\n * @param {Buffer|String|Array}   [ca]\n * @param {Object}          [defaults]\n * @constructor\n */\nvar ClientSSLSecurity = /** @class */ (function () {\n    function ClientSSLSecurity(key, cert, ca, defaults) {\n        if (key) {\n            if (Buffer.isBuffer(key)) {\n                this.key = key;\n            }\n            else if (typeof key === 'string') {\n                this.key = fs.readFileSync(key);\n            }\n            else {\n                throw new Error('key should be a buffer or a string!');\n            }\n        }\n        if (cert) {\n            if (Buffer.isBuffer(cert)) {\n                this.cert = cert;\n            }\n            else if (typeof cert === 'string') {\n                this.cert = fs.readFileSync(cert);\n            }\n            else {\n                throw new Error('cert should be a buffer or a string!');\n            }\n        }\n        if (ca) {\n            if (Buffer.isBuffer(ca) || Array.isArray(ca)) {\n                this.ca = ca;\n            }\n            else if (typeof ca === 'string') {\n                this.ca = fs.readFileSync(ca);\n            }\n            else {\n                defaults = ca;\n                this.ca = null;\n            }\n        }\n        this.defaults = {};\n        _.merge(this.defaults, defaults);\n        this.agent = null;\n    }\n    ClientSSLSecurity.prototype.toXML = function () {\n        return '';\n    };\n    ClientSSLSecurity.prototype.addOptions = function (options) {\n        var httpsAgent = null;\n        options.key = this.key;\n        options.cert = this.cert;\n        options.ca = this.ca;\n        _.merge(options, this.defaults);\n        if (!!options.forever) {\n            if (!this.agent) {\n                options.keepAlive = true;\n                this.agent = new https.Agent(options);\n            }\n            httpsAgent = this.agent;\n        }\n        else {\n            httpsAgent = new https.Agent(options);\n        }\n        options.httpsAgent = httpsAgent;\n    };\n    return ClientSSLSecurity;\n}());\nexports.ClientSSLSecurity = ClientSSLSecurity;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}